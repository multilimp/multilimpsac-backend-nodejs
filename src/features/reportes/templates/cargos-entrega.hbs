<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Cargos de Entrega</title>
    <style>
        {
                {
                    {
                    css
                }
            }
        }
    </style>
</head>

<body>
    <div class="contenedor">
        <!-- Encabezado del reporte -->
        <div class="encabezado">
            <h1>REPORTE DE CARGOS DE ENTREGA</h1>
            <div class="periodo">
                <strong>Período:</strong> {{ fechaInicio }} - {{ fechaFin }}
            </div>
            <div class="fecha-generacion">
                <strong>Fecha de Generación:</strong> {{ fechaGeneracion }}
            </div>
            <div class="total-ops">
                <strong>Total de Órdenes:</strong> {{ totalOps }}
            </div>
        </div>

        <!-- Listado de cargos por fecha -->
        {{#each fechasConCargos}}
        <div class="fecha-programacion">
            <h2>Fecha de Programación: {{ this.fecha }}</h2>

            {{#each this.ops}}
            <div class="cargo-entrega">
                <div class="numero-cargo">{{increment @index}}</div>

                <div class="datos-op">
                    <div class="codigo-op">{{ this.codigoOp }}</div>
                    {{#if this.ocf}}
                    <div class="ocf">OCF: {{ this.ocf }}</div>
                    {{/if}}
                    {{#if this.estadoOp}}
                    <div class="estado">Estado: {{ this.estadoOp }}</div>
                    {{/if}}
                </div>

                <!-- Productos -->
                {{#if this.productos.length}}
                <div class="seccion-productos">
                    <table class="tabla-productos">
                        <thead>
                            <tr>
                                <th>PRODUCTO</th>
                                <th>DESCRIPCIÓN</th>
                                <th>CANTIDAD</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each this.productos}}
                            <tr>
                                <td class="codigo-producto">{{ this.codigo }}</td>
                                <td class="descripcion-producto">{{ this.descripcion }}</td>
                                <td class="cantidad">{{ this.cantidad }}</td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
                {{/if}}

                <div class="datos-principales">
                    <!-- Proveedor -->
                    <div class="seccion-proveedor">
                        <h4>PROVEEDOR</h4>
                        <div class="empresa">{{ this.proveedor.razonSocial }}</div>
                        {{#if this.proveedor.contacto}}
                        <div class="contacto">
                            <strong>ENCARGADO:</strong> {{ this.proveedor.contacto.nombre }}
                        </div>
                        {{#if this.proveedor.contacto.telefono}}
                        <div class="telefono">
                            <strong>TELÉFONO:</strong> {{ this.proveedor.contacto.telefono }}
                        </div>
                        {{/if}}
                        {{/if}}
                    </div>

                    <!-- Destino -->
                    <div class="seccion-destino">
                        <h4>DESTINO</h4>
                        <div class="tipo-destino">{{ this.destino.tipo }}</div>
                        {{#if this.destino.cliente}}
                        <div class="cliente">{{ this.destino.cliente.razonSocial }}</div>
                        {{/if}}
                        {{#if this.destino.direccion}}
                        <div class="direccion">
                            <strong>DESTINO:</strong> {{ this.destino.direccion }}
                        </div>
                        {{/if}}
                        {{#if this.destino.distrito}}
                        <div class="ubicacion">
                            {{ this.destino.distrito }}{{#if this.destino.provincia}} / {{ this.destino.provincia
                            }}{{/if}}{{#if this.destino.departamento}} / {{ this.destino.departamento }}{{/if}}
                        </div>
                        {{/if}}
                        {{#if this.destino.referencia}}
                        <div class="referencia">
                            <strong>REFERENCIA:</strong> {{ this.destino.referencia }}
                        </div>
                        {{/if}}
                        {{#if this.destino.contacto}}
                        <div class="contacto-destino">
                            <strong>CONTACTO:</strong> {{ this.destino.contacto.nombre }}
                        </div>
                        {{#if this.destino.contacto.telefono}}
                        <div class="telefono-destino">
                            <strong>TELÉFONO:</strong> {{ this.destino.contacto.telefono }}
                        </div>
                        {{/if}}
                        {{/if}}
                    </div>
                </div>

                <!-- Observaciones -->
                {{#if this.observacion}}
                <div class="seccion-observacion">
                    <h4>OBSERVACIÓN</h4>
                    <div class="texto-observacion">{{ this.observacion }}</div>
                </div>
                {{/if}}
            </div>
            {{/each}}
        </div>
        {{/each}}

        {{#unless fechasConCargos.length}}
        <div class="sin-datos">
            <h3>No se encontraron órdenes de proveedor en el período seleccionado</h3>
            <p>Período consultado: {{ fechaInicio }} - {{ fechaFin }}</p>
        </div>
        {{/unless}}

        <!-- Pie de página -->
        <div class="pie-pagina">
            <div>Reporte generado automáticamente el {{ fechaGeneracion }}</div>
            <div>Sistema ERP - MULTILIMP SAC</div>
        </div>
    </div>
</body>

</html>